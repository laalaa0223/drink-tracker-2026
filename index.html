<!DOCTYPE html>

<html lang="zh-Hant">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>2026 æ‰‹æ–å¤§ä½œæˆ° âœ¨</title>

<!-- 1. åŸºç¤åº«è¼‰å…¥ -->

<script src="https://cdn.tailwindcss.com"></script>

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>

<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>


<!-- 2. Firebase åº« -->

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>



<!-- 3. åœ–æ¨™åº« (ä¿®æ­£ç‰ˆ) -->

<script src="https://unpkg.com/lucide@latest"></script>



<style>

@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');

body { font-family: 'Noto Sans TC', sans-serif; background-color: #FFF9FB; margin: 0; padding: 0; }

.heart-beat { animation: beat 1.5s ease-in-out infinite; }

@keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

/* é¿å…ç™½å±é—ªçƒ */

#root:empty { display: none; }

</style>

</head>

<body>

<div id="root"></div>



<script type="text/babel">

// ğŸ”´ è«‹ç¢ºä¿é€™è£¡å¡«å…¥çš„æ˜¯ä½ è‡ªå·±çš„ Firebase é‡‘é‘° ğŸ”´

const firebaseConfig = {

const firebaseConfig = {
  apiKey: "AIzaSyCJ773ohTtllA3UeUwYqVwv-68Dhu2v0fs",
  authDomain: "my-drink-tracker.firebaseapp.com",
  projectId: "my-drink-tracker",
  storageBucket: "my-drink-tracker.firebasestorage.app",
  messagingSenderId: "637285768502",
  appId: "1:637285768502:web:2b192cbc10a046ec47a797",
  measurementId: "G-21055EVPQL"
};



const { useState, useEffect, useMemo } = React;



// è‡ªå®šç¾©åœ–æ¨™çµ„ä»¶ï¼Œç¢ºä¿ lucide å­˜åœ¨

const Icon = ({ name, size = 24, className = "" }) => {

useEffect(() => {

if (window.lucide) {

window.lucide.createIcons();

}

}, [name]);

return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;

};



const App = () => {

const [user, setUser] = useState(null);

const [records, setRecords] = useState({});

const [isModalOpen, setIsModalOpen] = useState(false);

const [selectedDate, setSelectedDate] = useState(null);

const [currentMonth, setCurrentMonth] = useState(new Date(2026, 0, 1));

const [loading, setLoading] = useState(true);



useEffect(() => {

try {

if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();

auth.signInAnonymously().catch(console.error);

const unsubscribe = auth.onAuthStateChanged(u => {

setUser(u);

setLoading(false);

if (window.lucide) window.lucide.createIcons();

});

return () => unsubscribe();

} catch (err) {

console.error(err);

}

}, []);



useEffect(() => {

if (!user) return;

const db = firebase.firestore();

const docRef = db.collection('drink-app').doc(user.uid);

const unsubscribe = docRef.onSnapshot(doc => {

if (doc.exists) setRecords(doc.data().records || {});

});

return () => unsubscribe();

}, [user]);



const syncData = async (newRecords) => {

setRecords(newRecords);

if (!user) return;

await firebase.firestore().collection('drink-app').doc(user.uid).set({ records: newRecords });

};



const analytics = useMemo(() => {

const shopMap = {}; let mC = 0; let yC = 0;

const targetM = currentMonth.getMonth() + 1;

Object.entries(records).forEach(([date, list]) => {

const [y, m] = date.split('-').map(Number);

if (y === 2026) {

yC += list.length;

if (m === targetM) mC += list.length;

list.forEach(i => { if(i.shop) shopMap[i.shop] = (shopMap[i.shop]||0)+1; });

}

});

const topShop = Object.entries(shopMap).sort((a,b)=>b[1]-a[1])[0]?.[0] || "ç„¡";

return { mC, yC, topShop };

}, [records, currentMonth]);



const days = useMemo(() => {

const start = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1).getDay();

const total = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0).getDate();

return { start, total };

}, [currentMonth]);



if (loading) return <div className="h-screen flex items-center justify-center text-pink-400 font-bold text-xl">âœ¨ è¼‰å…¥ä¸­...</div>;



return (

<div className="max-w-md mx-auto p-4 min-h-screen">

<header className="bg-gradient-to-r from-pink-300 to-rose-300 rounded-3xl p-6 mb-6 text-white text-center shadow-lg">

<h1 className="text-2xl font-black tracking-tighter">2026 æ‰‹æ–å¤§ä½œæˆ°</h1>

<p className="text-xs opacity-80 font-bold uppercase mt-1">Daily Beverage Tracker</p>

</header>



<div className="grid grid-cols-2 gap-4 mb-6">

<div className="bg-white p-4 rounded-3xl shadow-sm border-b-4 border-pink-100">

<div className="flex items-center gap-2 mb-1">

<Icon name="cup-soda" size={16} className="text-pink-400" />

<span className="text-xs font-bold text-gray-400">æœ¬æœˆæ¯æ•¸</span>

</div>

<div className="text-2xl font-black text-gray-700">{analytics.mC} <span className="text-sm font-normal text-gray-400">æ¯</span></div>

</div>

<div className="bg-white p-4 rounded-3xl shadow-sm border-b-4 border-rose-100">

<div className="flex items-center gap-2 mb-1">

<Icon name="crown" size={16} className="text-rose-400" />

<span className="text-xs font-bold text-gray-400">å¹´åº¦ç¸½è¨ˆ</span>

</div>

<div className="text-2xl font-black text-gray-700">{analytics.yC} <span className="text-sm font-normal text-gray-400">æ¯</span></div>

</div>

</div>



<div className="flex justify-between items-center mb-4 px-2">

<button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth()-1))} className="p-2 bg-white rounded-full shadow-sm"><Icon name="chevron-left" size={20}/></button>

<span className="font-black text-gray-600 text-lg">{currentMonth.getFullYear()} / {currentMonth.getMonth()+1}</span>

<button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth()+1))} className="p-2 bg-white rounded-full shadow-sm"><Icon name="chevron-right" size={20}/></button>

</div>



<div className="bg-white rounded-[2.5rem] p-6 shadow-xl border border-pink-50 grid grid-cols-7 gap-2">

{['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'].map(d => <div key={d} className="text-center text-xs font-bold text-gray-300 mb-2">{d}</div>)}

{Array.from({ length: days.start }).map((_, i) => <div key={`empty-${i}`} />)}

{Array.from({ length: days.total }).map((_, i) => {

const d = i + 1;

const key = `2026-${currentMonth.getMonth()+1}-${d}`;

const count = (records[key] || []).length;

return (

<div key={d} onClick={() => { setSelectedDate(key); setIsModalOpen(true); }} className={`h-12 rounded-2xl flex flex-col items-center justify-center cursor-pointer transition-all ${count > 0 ? 'bg-pink-50 border-2 border-pink-100 scale-105' : 'hover:bg-gray-50'}`}>

<span className={`text-xs font-bold ${count > 0 ? 'text-pink-500' : 'text-gray-400'}`}>{d}</span>

{count > 0 && <Icon name="heart" size={8} className="text-pink-400 fill-pink-400 heart-beat mt-1" />}

</div>

);

})}

</div>



{isModalOpen && (

<div className="fixed inset-0 z-50 bg-black/40 backdrop-blur-md flex items-end sm:items-center justify-center p-4">

<div className="bg-white w-full max-w-md rounded-[3rem] p-8 shadow-2xl animate-in slide-in-from-bottom duration-300">

<div className="flex justify-between items-center mb-6">

<h2 className="text-xl font-black text-gray-700">{selectedDate} é£²é…’éŒ„</h2>

<button onClick={() => setIsModalOpen(false)} className="bg-gray-100 p-2 rounded-full text-gray-400"><Icon name="x" size={20}/></button>

</div>

<div className="space-y-4 mb-6">

{(records[selectedDate] || []).map(drink => (

<div key={drink.id} className="p-4 bg-pink-50/50 rounded-3xl border border-pink-100 relative group">

<button onClick={() => {

const newList = records[selectedDate].filter(i => i.id !== drink.id);

syncData({...records, [selectedDate]: newList});

}} className="absolute -top-2 -right-2 bg-white shadow-md p-1.5 rounded-full text-gray-300 hover:text-red-400"><Icon name="trash-2" size={14}/></button>

<div className="flex gap-2">

<input placeholder="åº—å®¶" value={drink.shop} onChange={e => {

const newList = records[selectedDate].map(i => i.id === drink.id ? {...i, shop: e.target.value} : i);

syncData({...records, [selectedDate]: newList});

}} className="w-1/2 p-3 rounded-2xl text-sm font-bold bg-white focus:ring-2 ring-pink-200 outline-none" />

<input placeholder="å“é …" value={drink.item} onChange={e => {

const newList = records[selectedDate].map(i => i.id === drink.id ? {...i, item: e.target.value} : i);

syncData({...records, [selectedDate]: newList});

}} className="w-1/2 p-3 rounded-2xl text-sm font-bold bg-white focus:ring-2 ring-pink-200 outline-none" />

</div>

</div>

))}

<button onClick={() => {

const newList = [...(records[selectedDate] || []), { id: Date.now(), shop:'', item:'' }];

syncData({...records, [selectedDate]: newList});

}} className="w-full py-4 border-2 border-dashed border-pink-200 rounded-3xl text-pink-300 font-bold hover:bg-pink-50 transition-colors">+ æ–°å¢é€™æ¯é£²æ–™</button>

</div>

<button onClick={() => setIsModalOpen(false)} className="w-full bg-gradient-to-r from-pink-400 to-rose-400 text-white font-black py-4 rounded-[2rem] shadow-lg shadow-pink-200 transform active:scale-95 transition-transform">å„²å­˜æˆ‘çš„ç´€éŒ„</button>

</div>

</div>

)}

</div>

);

};



const root = ReactDOM.createRoot(document.getElementById('root'));

root.render(<App />);

</script>

</body>

</html>
